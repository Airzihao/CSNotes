https://www.cnblogs.com/pony1223/p/7643842.html

https://www.cnblogs.com/pony1223/p/7594803.html

https://www.cnblogs.com/pony1223/p/7608955.html

## 设计原则

### 1. 单一职责

一个类应该只有一种职责，但是指责扩散会导致代码违背这一原则。开始的时候可能会在原有的类上扩展职责，这样改动较小，但是在职责扩散到无法控制的程度之前，应该对代码重构。

初期设计会自觉遵守单一职责原则，但随着职责扩散，不可避免地会违背这一原则。这时可以扩展类，使之继续满足单一职责原则，也可以修改方法。

### 2. 里氏替换原则（Liskov Substitution Principle）
面向对象设计的基本原则之一，任何基类可以出现的地方，子类一定可以出现。只有当衍生类可以替换掉基类，软件单位的功能不受影响时，基类才能真正被复用。基类与子类的继承关系是抽象化的具体实现，所以里氏替换原则是对实现抽象化的具体步骤的规范。

通俗讲：子类可以扩展基类的功能，但不能改变基类原有的功能。

包含四层含义：
- 子类可以实现父类的抽象方法，但不能覆盖父类的非抽象方法。
- 子类中可以增加自己独有的方法。
- 子类的方法重载父类方法时，方法的形参要比父类方法的输入参数更宽松。
- 子类的方法实现父类的抽象方法时，方法的后置条件（返回值）要比父类更严格。

解决方案：使用继承时，除了在子类中添加新方法，尽量不要重写基类中的方法，也不要重载基类的方法。

重写基类的方法来完成新的功能，写起来虽然简单，但是整个继承体系的可复用性会降低，特别是多态运用频繁时。如果一定要重写父类的方法，比较通用的做法是：原来的父类和子类都继承一个更通俗的基类，将原有的继承关系去掉，采用依赖、聚合、组合等关系代替。


### 3. 依赖倒置原则（Dependence Inversion Principle）
依赖于抽象，不依赖于具体。高层模块不应依赖低层模块，二者都应依赖其抽象；抽象不应依赖其细节，细节应该依赖抽象。

相对于细节的多变性，抽象的东西更稳定。使用接口或抽象类的目的是指定规范，不涉及具体操作，把展现细节的任务交给他们的实现类去完成。

依赖倒置原则的核心思想是面向接口编程。

```
interface IReader{
    public String getContent();
}

class Newspaper implements IReader{
    public String getContent(){
        return "This is a newspaper.";
    }
}

class Book implements IReader{
    public String getContent(){
        return "This is a book.";
    }
}

class Mother {
    public void narrate(IReader reader){
        System.out.println(reader.getContent());
    }
}
```
实际编程中，需要做到以下3点：
- 低层模块尽量要有抽象类或接口，或者两者都有。
- 变量的声明类型尽量是抽象类或接口。
- 使用继承时，遵循里氏替换原则。

### 4. 接口隔离原则（Interface Segregation Principle）
降低依赖，降低耦合。

定义：客户端不应依赖他不需要的接口，一个类对另一个类的依赖应该建立在最小的接口上。

如果一个类implement一个不是最小接口的接口，那它就要实现自己不需要的方法。

建立单一接口，不要建立庞大臃肿的接口，尽量细化接口，接口中的方法尽量少。

接口隔离与单一职责的区别：
- 单一职责注重职责，接口隔离注重对接口依赖的隔离。
- 单一职责主要是约束类，其次是接口和方法，针对程序中的实现和细节。
- 接口隔离主要约束接口，主要针对对象，针对程序整体框架的构建。


注意事项：
- 接口过大臃肿，要实现不必要的方法。
- 接口过小，造成接口数量过多，使设计复杂化。
- 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情。


### 5. 迪米特法则（Demeter Principle）
一个对象应该对其他对象保持最少的了解。软件编程的总原则是低耦合高内聚，耦合度低才能提高复用率。

一个类对自己依赖的类知道的越少越好。对于被依赖的类来说，无论逻辑多么复杂，都尽量将逻辑封装在类的内部，对外只提供一些必须的public方法。

只要两个对象之间有耦合关系，就说这两个对象之间是朋友关系。出现在成员变量、方法参数、方法返回值中的类为直接朋友，出现在局部变量中的类不是直接朋友。陌生的类最好不要以局部变量的形式出现在类内部。

过份遵守迪米特原则，会产生大量中介和传递类。

### 6. 开闭原则
对扩展开放，对修改关闭，在程序需要扩展时，不能修改原有代码。

开闭原则是面向对象设计中最基础的设计原则，实际是用抽象构建框架，用实现扩展细节。因为抽象灵活性好，适应性广，合理的抽象可以保持软件架构的稳定。软件中的易变细节可以用从抽象派生的实现类来进行扩展。

### 总结：
开闭原则是总纲，对扩展开放，对修改关闭。其他五项原则是陈述用抽象构建框架，用实现扩展细节的注意事项。
- 单一职责：类要职责单一。
- 里氏替换原则： 不要破坏继承体系。
- 依赖倒置原则：面向接口编程。
- 接口隔离原则： 设计接口要精简。
- 迪米特法则：降低耦合。


第一：别把自己的数据公开，除非你要向别人提供数据，使用尽量低的访问权限。
第二：以一个外部的视角来看类，紧记不要要求别人要在知道你是怎么实现一个方法之后才能使用我的类。
第三：分清类的职责，该这个类做的事情就要在这个类中实现，不该我的类做的事情就让别的类去实现。